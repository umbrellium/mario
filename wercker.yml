box: wercker/golang

# dev pipeline
##########
# activate when app is live
# works only with new stack
##########
# dev:
# 	steps:
# 		-internal/watch:
# 			code: |
# 				go build ./
# 				./source
# 			reload: true

# build pipeline
build:
    steps:
        #- wercker/golint
        - setup-go-workspace

        # Gets dependencies
        # - script:
        #     name: go get
        #     code: |
        #         go get ./

        # Build the projetc
        - script:
            name: go build
            code: |
                go build ./

        # Run tests
        - script:
            name: go test
            code: |
                go test ./

# deploy to heroku pipeline
deploy:
    steps:
        - heroku-deploy:
            key-name: HEROKU_DEPLOY

        # Fire the app
        - script:
            name: start mario
            code: |
                bin/mario